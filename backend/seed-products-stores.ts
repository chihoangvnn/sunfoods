import { db } from './src/db';
import { products, storeProducts } from '@shared/schema';

async function seedProductsAndAssignStores() {
  console.log('üå± Seeding products and assigning to stores...');
  
  const sunfoodsProducts = [
    { name: "H·∫°t Chia Organic Peru", price: 145000, description: "H·∫°t chia h·ªØu c∆° nh·∫≠p kh·∫©u t·ª´ Peru, gi√†u Omega-3", image: "https://images.unsplash.com/photo-1594221708779-94832f4320d1?w=800", stock: 50, sku: "SF-CHIA-001" },
    { name: "H·∫°t √ìc Ch√≥ M·ªπ Premium", price: 285000, description: "H·∫°t √≥c ch√≥ M·ªπ lo·∫°i 1, gi√†u DHA t·ªët cho n√£o", image: "https://images.unsplash.com/photo-1599599810769-bcde5a160d32?w=800", stock: 30, sku: "SF-WALNUT-001" },
    { name: "M·∫≠t Ong R·ª´ng Tr√†m U Minh", price: 320000, description: "M·∫≠t ong r·ª´ng tr√†m nguy√™n ch·∫•t 100%, v·ªã ƒë·∫≠m ƒë√†", image: "https://images.unsplash.com/photo-1587049352846-4a222e784acc?w=800", stock: 40, sku: "SF-HONEY-001" },
    { name: "H·∫°nh Nh√¢n Rang Mu·ªëi", price: 195000, description: "H·∫°nh nh√¢n √öc rang mu·ªëi v·ª´a, gi√≤n tan", image: "https://images.unsplash.com/photo-1508896694512-1eade558679c?w=800", stock: 60, sku: "SF-ALMOND-001" },
    { name: "Tr√† Hoa C√∫c La M√£", price: 125000, description: "Tr√† hoa c√∫c La M√£, gi√∫p th∆∞ gi√£n v√† ng·ªß ngon", image: "https://images.unsplash.com/photo-1564890369478-c89ca6d9cde9?w=800", stock: 45, sku: "SF-TEA-001" },
    { name: "Granola Y·∫øn M·∫°ch Mix Nuts", price: 165000, description: "Granola y·∫øn m·∫°ch h·ªón h·ª£p h·∫°t dinh d∆∞·ª°ng", image: "https://images.unsplash.com/photo-1526318896980-cf78c088247c?w=800", stock: 35, sku: "SF-GRANOLA-001" },
    { name: "D·∫ßu √î Liu √ù Extra Virgin", price: 420000, description: "D·∫ßu √¥ liu nguy√™n ch·∫•t √ù, √©p l·∫°nh l·∫ßn ƒë·∫ßu", image: "https://images.unsplash.com/photo-1474979266404-7eaacbcd87c5?w=800", stock: 25, sku: "SF-OLIVE-001" },
    { name: "Quinoa 3 M√†u Organic", price: 185000, description: "Quinoa h·ªØu c∆° 3 m√†u, si√™u th·ª±c ph·∫©m", image: "https://images.unsplash.com/photo-1586201375761-83865001e31c?w=800", stock: 40, sku: "SF-QUINOA-001" },
    { name: "H·∫°t ƒêi·ªÅu Rang B∆°", price: 235000, description: "H·∫°t ƒëi·ªÅu rang b∆° th∆°m b√πi, ngu·ªìn protein t·ªët", image: "https://images.unsplash.com/photo-1599599810694-b5158c1c2c01?w=800", stock: 50, sku: "SF-CASHEW-001" },
    { name: "Tr√† G·ª´ng Ngh·ªá M·∫≠t Ong", price: 145000, description: "Tr√† g·ª´ng ngh·ªá m·∫≠t ong, tƒÉng mi·ªÖn d·ªãch", image: "https://images.unsplash.com/photo-1576092768241-dec231879fc3?w=800", stock: 55, sku: "SF-GINGER-001" }
  ];

  const tramHuongProducts = [
    { name: "Tr·∫ßm H∆∞∆°ng Kh√°nh H√≤a T·ª± Nhi√™n", price: 2850000, description: "Tr·∫ßm h∆∞∆°ng Kh√°nh H√≤a t·ª± nhi√™n, m√πi th∆°m qu√Ω ph√°i", image: "https://images.unsplash.com/photo-1603537392197-e0084e00c1b1?w=800", stock: 10, sku: "TH-TRAM-001" },
    { name: "V√≤ng Tay Tr·∫ßm H∆∞∆°ng 16ly", price: 3200000, description: "V√≤ng tay tr·∫ßm h∆∞∆°ng 16ly, v√¢n ƒë·∫πp t·ª± nhi√™n", image: "https://images.unsplash.com/photo-1611591437281-460bfbe1220a?w=800", stock: 15, sku: "TH-BRACELET-001" },
    { name: "T∆∞·ª£ng Ph·∫≠t Di L·∫∑c G·ªó Tr·∫ßm", price: 8500000, description: "T∆∞·ª£ng Ph·∫≠t Di L·∫∑c g·ªó tr·∫ßm h∆∞∆°ng nguy√™n kh·ªëi", image: "https://images.unsplash.com/photo-1583521214690-73421a1829a9?w=800", stock: 5, sku: "TH-STATUE-001" },
    { name: "D·∫ßu Tr·∫ßm H∆∞∆°ng Nguy√™n Ch·∫•t", price: 1250000, description: "D·∫ßu tr·∫ßm h∆∞∆°ng nguy√™n ch·∫•t 10ml, th∆°m l√¢u", image: "https://images.unsplash.com/photo-1608571423902-eed4a5ad8108?w=800", stock: 20, sku: "TH-OIL-001" },
    { name: "Nhang Tr·∫ßm Cao C·∫•p 100g", price: 450000, description: "Nhang tr·∫ßm h∆∞∆°ng cao c·∫•p, m√πi th∆°m thanh tao", image: "https://images.unsplash.com/photo-1602524206684-76b7b9bf546c?w=800", stock: 25, sku: "TH-INCENSE-001" },
    { name: "Chu·ªói Tr·∫ßm H∆∞∆°ng 108 H·∫°t", price: 1850000, description: "Chu·ªói tr·∫ßm h∆∞∆°ng 108 h·∫°t, d√πng ni·ªám Ph·∫≠t", image: "https://images.unsplash.com/photo-1611591437281-460bfbe1220a?w=800", stock: 12, sku: "TH-ROSARY-001" },
    { name: "Tr·∫ßm Ch√¨m N∆∞·ªõc Cao C·∫•p 50g", price: 5200000, description: "Tr·∫ßm ch√¨m n∆∞·ªõc cao c·∫•p, m√πi th∆°m ƒë·∫≠m ƒë√†", image: "https://images.unsplash.com/photo-1603537392197-e0084e00c1b1?w=800", stock: 8, sku: "TH-SINK-001" },
    { name: "L∆∞ X√¥ng Tr·∫ßm G·ªëm B√°t Tr√†ng", price: 850000, description: "L∆∞ x√¥ng tr·∫ßm g·ªëm B√°t Tr√†ng cao c·∫•p", image: "https://images.unsplash.com/photo-1581511378923-de10b4c9632e?w=800", stock: 18, sku: "TH-BURNER-001" },
    { name: "Nh·∫´n Tr·∫ßm H∆∞∆°ng Nam", price: 2100000, description: "Nh·∫´n tr·∫ßm h∆∞∆°ng nam v√¢n ƒë·∫πp, sang tr·ªçng", image: "https://images.unsplash.com/photo-1605100804763-247f67b3557e?w=800", stock: 10, sku: "TH-RING-001" },
    { name: "Tr·∫ßm H∆∞∆°ng V·ª•n X√¥ng Ph√≤ng", price: 680000, description: "Tr·∫ßm h∆∞∆°ng v·ª•n x√¥ng ph√≤ng 100g, th∆°m l√¢u", image: "https://images.unsplash.com/photo-1603537392197-e0084e00c1b1?w=800", stock: 30, sku: "TH-POWDER-001" }
  ];

  const nhangSachProducts = [
    { name: "Nhang S·∫°ch H∆∞∆°ng Lavender", price: 85000, description: "Nhang s·∫°ch h∆∞∆°ng lavender, kh√¥ng h√≥a ch·∫•t", image: "https://images.unsplash.com/photo-1602524206684-76b7b9bf546c?w=800", stock: 60, sku: "NS-LAV-001" },
    { name: "Tinh D·∫ßu B·∫°c H√† Thi√™n Nhi√™n", price: 125000, description: "Tinh d·∫ßu b·∫°c h√† 10ml, thanh l·ªçc kh√¥ng kh√≠", image: "https://images.unsplash.com/photo-1608571423902-eed4a5ad8108?w=800", stock: 45, sku: "NS-MINT-001" },
    { name: "N·∫øn Th∆°m S√°p ƒê·∫≠u N√†nh", price: 195000, description: "N·∫øn th∆°m s√°p ƒë·∫≠u n√†nh organic, ch√°y s·∫°ch", image: "https://images.unsplash.com/photo-1602874801006-26a2a8b03cac?w=800", stock: 40, sku: "NS-CANDLE-001" },
    { name: "B√°t H∆∞∆°ng G·ªëm S·ª© Cao C·∫•p", price: 320000, description: "B√°t h∆∞∆°ng g·ªëm s·ª© B√°t Tr√†ng, thi·∫øt k·∫ø tinh x·∫£o", image: "https://images.unsplash.com/photo-1581511378923-de10b4c9632e?w=800", stock: 25, sku: "NS-BOWL-001" },
    { name: "Nhang Tr·∫ßm Thanh L·ªçc", price: 165000, description: "Nhang tr·∫ßm thanh l·ªçc kh√¥ng gian, 100% t·ª± nhi√™n", image: "https://images.unsplash.com/photo-1602524206684-76b7b9bf546c?w=800", stock: 50, sku: "NS-TRAM-001" },
    { name: "Tinh D·∫ßu S·∫£ Chanh 10ml", price: 95000, description: "Tinh d·∫ßu s·∫£ chanh ƒëu·ªïi mu·ªói t·ª± nhi√™n", image: "https://images.unsplash.com/photo-1608571423902-eed4a5ad8108?w=800", stock: 55, sku: "NS-LEMON-001" },
    { name: "Nhang Ng·∫£i C·ª©u X√¥ng Ph√≤ng", price: 105000, description: "Nhang ng·∫£i c·ª©u x√¥ng ph√≤ng, s√°t khu·∫©n t·ª± nhi√™n", image: "https://images.unsplash.com/photo-1602524206684-76b7b9bf546c?w=800", stock: 48, sku: "NS-MUGW-001" },
    { name: "N·∫øn Tinh D·∫ßu Eucalyptus", price: 215000, description: "N·∫øn tinh d·∫ßu b·∫°ch ƒë√†n, gi√∫p th√¥ng m≈©i", image: "https://images.unsplash.com/photo-1602874801006-26a2a8b03cac?w=800", stock: 35, sku: "NS-EUC-001" },
    { name: "Nhang Que H∆∞∆°ng Hoa H·ªìng", price: 75000, description: "Nhang que h∆∞∆°ng hoa h·ªìng, th∆°m d·ªãu nh·∫π", image: "https://images.unsplash.com/photo-1602524206684-76b7b9bf546c?w=800", stock: 65, sku: "NS-ROSE-001" },
    { name: "Tinh D·∫ßu Cam Ng·ªçt 10ml", price: 110000, description: "Tinh d·∫ßu cam ng·ªçt t∆∞∆°i m√°t, gi·∫£m stress", image: "https://images.unsplash.com/photo-1608571423902-eed4a5ad8108?w=800", stock: 50, sku: "NS-ORANGE-001" }
  ];

  console.log('\nüì¶ Creating SunFoods products...');
  const sfCreated = [];
  for (const product of sunfoodsProducts) {
    const [created] = await db.insert(products).values({
      ...product,
      status: 'active',
      slug: product.sku.toLowerCase()
    }).returning();
    sfCreated.push(created);
    console.log(`  ‚úì Created: ${created.name} (${created.sku})`);
  }

  console.log('\nüîó Assigning SunFoods products to store...');
  for (const product of sfCreated) {
    await db.insert(storeProducts).values({
      storeId: 'sunfoods',
      productId: product.id,
      isActive: true,
      sortOrder: 0
    });
  }
  console.log(`  ‚úì Assigned ${sfCreated.length} products to SunFoods store`);

  console.log('\nüì¶ Creating Tr·∫ßm H∆∞∆°ng products...');
  const thCreated = [];
  for (const product of tramHuongProducts) {
    const [created] = await db.insert(products).values({
      ...product,
      status: 'active',
      slug: product.sku.toLowerCase()
    }).returning();
    thCreated.push(created);
    console.log(`  ‚úì Created: ${created.name} (${created.sku})`);
  }

  console.log('\nüîó Assigning Tr·∫ßm H∆∞∆°ng products to store...');
  for (const product of thCreated) {
    await db.insert(storeProducts).values({
      storeId: 'tramhuong',
      productId: product.id,
      isActive: true,
      sortOrder: 0
    });
  }
  console.log(`  ‚úì Assigned ${thCreated.length} products to Tr·∫ßm H∆∞∆°ng store`);

  console.log('\nüì¶ Creating Nhang S·∫°ch products...');
  const nsCreated = [];
  for (const product of nhangSachProducts) {
    const [created] = await db.insert(products).values({
      ...product,
      status: 'active',
      slug: product.sku.toLowerCase()
    }).returning();
    nsCreated.push(created);
    console.log(`  ‚úì Created: ${created.name} (${created.sku})`);
  }

  console.log('\nüîó Assigning Nhang S·∫°ch products to store...');
  for (const product of nsCreated) {
    await db.insert(storeProducts).values({
      storeId: 'nhangsach',
      productId: product.id,
      isActive: true,
      sortOrder: 0
    });
  }
  console.log(`  ‚úì Assigned ${nsCreated.length} products to Nhang S·∫°ch store`);

  console.log('\nüéâ Seed completed successfully!');
  console.log(`\nüìä Summary:`);
  console.log(`  ‚Ä¢ SunFoods: ${sfCreated.length} products`);
  console.log(`  ‚Ä¢ Tr·∫ßm H∆∞∆°ng: ${thCreated.length} products`);
  console.log(`  ‚Ä¢ Nhang S·∫°ch: ${nsCreated.length} products`);
  console.log(`  ‚Ä¢ Total: ${sfCreated.length + thCreated.length + nsCreated.length} products created and assigned`);
}

seedProductsAndAssignStores()
  .catch((error) => {
    console.error('‚ùå Seed failed:', error);
    process.exit(1);
  })
  .finally(() => {
    process.exit(0);
  });
