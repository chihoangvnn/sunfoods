root@sunfoods:/var/www/sun# pm2 logs backend --lines 30
[TAILING] Tailing last 30 lines for [backend] process (change the value with --lines option)
/root/.pm2/logs/backend-error-0.log last 30 lines:
0|backend  |     at consumeUntil (/var/www/sun/backend/dist/index.js:176460:17)
0|backend  |     at parse (/var/www/sun/backend/dist/index.js:176464:28)
0|backend  |     at pathToRegexp2 (/var/www/sun/backend/dist/index.js:176563:58)
0|backend  |     at ApiConfigurationCache.getAllConfigs (/var/www/sun/backend/dist/index.js:176816:67)
0|backend  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
0|backend  |     at async ApiConfigurationCache.findMatchingConfig (/var/www/sun/backend/dist/index.js:176832:28)
0|backend  |     at async /var/www/sun/backend/dist/index.js:176708:22 {
0|backend  |   originalPath: '/api/webhooks/facebook/:appId?'
0|backend  | }
0|backend  | ğŸš¨ SYSTEM HEALTH CRITICAL: [
0|backend  |   'ğŸ”´ WORKERS is unhealthy: Critical issue detected',
0|backend  |   'ğŸ”´ CRITICAL: No workers are online - Auto-posting system is offline'
0|backend  | ]
0|backend  | ğŸš¨ SYSTEM HEALTH CRITICAL: [
0|backend  |   'ğŸ”´ WORKERS is unhealthy: Critical issue detected',
0|backend  |   'ğŸ”´ CRITICAL: No workers are online - Auto-posting system is offline'
0|backend  | ]
0|backend  | ğŸš¨ SYSTEM HEALTH CRITICAL: [
0|backend  |   'ğŸ”´ WORKERS is unhealthy: Critical issue detected',
0|backend  |   'ğŸ”´ CRITICAL: No workers are online - Auto-posting system is offline'
0|backend  | ]
0|backend  | ğŸš¨ SYSTEM HEALTH CRITICAL: [
0|backend  |   'ğŸ”´ WORKERS is unhealthy: Critical issue detected',
0|backend  |   'ğŸ”´ CRITICAL: No workers are online - Auto-posting system is offline'
0|backend  | ]
0|backend  | âš ï¸  VAPID keys not configured! Push notifications will not work.
0|backend  |    Set VAPID_PUBLIC_KEY and VAPID_PRIVATE_KEY environment variables.
0|backend  | âš ï¸ THÃ”NG BÃO: Äang sá»­ dá»¥ng TikTok credentials máº«u. Vui lÃ²ng thay tháº¿ báº±ng credentials tháº­t tá»« TikTok Developer Portal Ä‘á»ƒ káº¿t ná»‘i thá»±c táº¿.
0|backend  | âš ï¸ Replit OAuth credentials not found. Set REPLIT_APP_ID and REPLIT_APP_SECRET environment variables.
0|backend  | âš ï¸ Campaign verifier: Redis not configured - running without queue-based verification

/var/www/sun/backend/logs/backend-out-0.log last 30 lines:
0|backend  | ğŸ¥ Started worker health monitoring
0|backend  | ğŸ¥ Started system health monitoring
0|backend  | ğŸ§© Initializing built-in template registry...
0|backend  | âœ… Loaded 4 built-in templates
0|backend  | ğŸš€ Registering API Management Middleware...
0|backend  | âœ… API Management Middleware registered successfully
0|backend  | ğŸš€ Starting Facebook post scheduler...
0|backend  | ğŸš€ Starting post scheduler - checking every minute for scheduled posts
0|backend  | Query: select "id", "caption", "hashtags", "asset_ids", "social_account_id", "platform", "scheduled_time", "timezone", "status", "published_at", "platform_post_id", "platform_url", "error_message", "retry_count", "last_retry_at", "analytics", "created_at", "updated_at", "priority", "ip_pool_id", "ip_snapshot", "batch_id" from "scheduled_posts" where ("scheduled_posts"."status" = $1 and "scheduled_posts"."scheduled_time" <= $2) order by "scheduled_posts"."scheduled_time" -- params: ["scheduled", "2025-10-08T02:11:30.988Z"]
0|backend  | âœ… Shopee routes loaded successfully
0|backend  | ğŸ”§ API Management middleware initialized
0|backend  | ğŸ¤– Mounting Product FAQs Router...
0|backend  | âœ… Product FAQs Router mounted successfully
0|backend  | ğŸšš Mounting ViettelPost routes...
0|backend  | âœ… ViettelPost routes mounted successfully
0|backend  | Serving admin static files from /var/www/sun/backend/public/admin
0|backend  | serving on port 3000
0|backend  | ğŸš€ Starting post scheduler...
0|backend  | âœ… Scheduler started - polling every 60s
0|backend  | ğŸš€ Starting analytics scheduler (interval: 3600s)
0|backend  | ğŸ“Š Starting analytics collection run...
0|backend  | ğŸš€ Starting campaign verifier...
0|backend  | ğŸš€ Starting campaign verifier worker...
0|backend  | Query: select "id", "caption", "hashtags", "asset_ids", "social_account_id", "platform", "scheduled_time", "timezone", "status", "published_at", "platform_post_id", "platform_url", "error_message", "retry_count", "last_retry_at", "analytics", "created_at", "updated_at", "priority", "ip_pool_id", "ip_snapshot", "batch_id" from "scheduled_posts" where ("scheduled_posts"."status" = $1 and "scheduled_posts"."scheduled_time" <= $2) order by "scheduled_posts"."scheduled_time" -- params: ["scheduled", "2025-10-08T02:11:31.108Z"]
0|backend  | Query: select "id", "caption", "hashtags", "asset_ids", "social_account_id", "platform", "scheduled_time", "timezone", "status", "published_at", "platform_post_id", "platform_url", "error_message", "retry_count", "last_retry_at", "analytics", "created_at", "updated_at", "priority", "ip_pool_id", "ip_snapshot", "batch_id" from "scheduled_posts" "scheduledPosts" where ("scheduledPosts"."status" = $1 and ("scheduledPosts"."analytics" is null or "scheduledPosts"."updated_at" < $2)) order by "scheduledPosts"."published_at" asc limit $3 -- params: ["posted", "2025-10-08T01:41:31.109Z", 50]
0|backend  | Query: select "id", "campaign_id", "customer_id", "share_url", "submitted_at", "status", "verification_scheduled_at", "last_verified_at", "rewarded_at", "voucher_id", "rejection_reason", "verification_attempts", "metadata", "created_at", "updated_at" from "campaign_participations" where ("campaign_participations"."status" = $1 and "campaign_participations"."verification_scheduled_at" <= $2) order by "campaign_participations"."verification_scheduled_at" -- params: ["pending", "2025-10-08T02:11:31.110Z"]
0|backend  | Query: select "id", "caption", "hashtags", "asset_ids", "social_account_id", "platform", "scheduled_time", "timezone", "status", "published_at", "platform_post_id", "platform_url", "error_message", "retry_count", "last_retry_at", "analytics", "created_at", "updated_at", "priority", "ip_pool_id", "ip_snapshot", "batch_id" from "scheduled_posts" where ("scheduled_posts"."status" = $1 and "scheduled_posts"."retry_count" <= $2) -- params: ["failed", 2]
0|backend  | ğŸ“ˆ Found 0 posts to fetch analytics for
0|backend  | âœ… Analytics collection complete: 0 success, 0 errors
0|backend  | ğŸ“‹ Found 0 participations to verify

0|backend  | ğŸ“­ No due posts at 2025-10-08T02:11:31.108Z
