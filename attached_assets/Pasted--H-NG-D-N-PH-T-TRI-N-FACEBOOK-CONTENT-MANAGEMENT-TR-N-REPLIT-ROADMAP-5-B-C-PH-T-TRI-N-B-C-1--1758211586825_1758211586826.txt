 HÆ¯á»šNG DáºªN PHÃT TRIá»‚N FACEBOOK CONTENT MANAGEMENT TRÃŠN REPLIT
ðŸ“‹ ROADMAP 5 BÆ¯á»šC PHÃT TRIá»‚N
BÆ¯á»šC 1: Táº O PROJECT VÃ€ SETUP ENVIRONMENT
1.1 Táº¡o Replit má»›i:

1. VÃ o Replit.com
2. Create â†’ Express.js template
3. Äáº·t tÃªn: "facebook-content-management"
1.2 Setup Database:

1. Sidebar â†’ Database â†’ Create PostgreSQL
2. Copy connection string vÃ o .env
3. Setup environment variables:
DATABASE_URL=postgresql://...  # Auto tá»« Replit DB
CLOUDINARY_CLOUD_NAME=your_name
CLOUDINARY_API_KEY=your_key
CLOUDINARY_API_SECRET=your_secret
JWT_SECRET=your_secret_123
1.3 Install dependencies:

npm install sequelize pg pg-hstore cloudinary multer bcryptjs jsonwebtoken
npm install joi helmet cors express-rate-limit winston
npm install bull redis  # Cho background jobs
BÆ¯á»šC 2: Táº O DATABASE SCHEMA & MODELS
2.1 Táº¡o Sequelize config:

// config/database.js
const { Sequelize } = require('sequelize');
const sequelize = new Sequelize(process.env.DATABASE_URL, {
  dialect: 'postgres',
  logging: false,
  dialectOptions: {
    ssl: { require: true, rejectUnauthorized: false }
  }
});
module.exports = { sequelize };
2.2 Táº¡o Models theo thá»© tá»±:

models/
â”œâ”€â”€ Category.js      # Táº¡o trÆ°á»›c (khÃ´ng cÃ³ foreign key)
â”œâ”€â”€ Asset.js         # Sau khi cÃ³ Category  
â”œâ”€â”€ Account.js       # Sau khi cÃ³ Category
â”œâ”€â”€ Post.js          # Cuá»‘i cÃ¹ng (cÃ³ FK tá»« Asset + Account + Category)
â””â”€â”€ index.js         # Associations
2.3 Test database connection:

// test.js
const { sequelize } = require('./config/database');
async function testDB() {
  try {
    await sequelize.authenticate();
    console.log('âœ… Database connected');
    
    await sequelize.sync({ force: true }); // Táº¡o tables
    console.log('âœ… Tables created');
  } catch(error) {
    console.error('âŒ DB Error:', error);
  }
}
testDB();
BÆ¯á»šC 3: BUILD API ENDPOINTS
3.1 Setup Express server:

// server.js
const express = require('express');
const cors = require('cors');
const helmet = require('helmet');
const app = express();
// Middleware
app.use(helmet());
app.use(cors());
app.use(express.json());
// Routes
app.use('/api/categories', require('./routes/categories'));
app.use('/api/assets', require('./routes/assets'));
app.use('/upload', require('./routes/upload'));
// Health check
app.get('/health', (req, res) => {
  res.json({ status: 'OK' });
});
const PORT = process.env.PORT || 3000;
app.listen(PORT, '0.0.0.0', () => {
  console.log(`ðŸš€ Server running on port ${PORT}`);
});
3.2 Táº¡o Routes theo thá»© tá»± Æ°u tiÃªn:

1. categories.js     # CRUD categories (lÃ m trÆ°á»›c)
2. upload.js         # Upload files (cáº§n categories)  
3. assets.js         # Manage assets (cáº§n upload)
4. accounts.js       # Facebook accounts
5. posts.js          # Scheduling posts
6. analytics.js      # Analytics dashboard
3.3 Test tá»«ng endpoint:

# Test trong Replit Console
curl https://your-repl.replit.dev/health
curl -X POST https://your-repl.replit.dev/api/categories \
  -H "Content-Type: application/json" \
  -d '{"name":"Test Category"}'
BÆ¯á»šC 4: TÃCH Há»¢P CLOUDINARY & FACEBOOK
4.1 Setup Cloudinary service:

// services/cloudinaryService.js
const cloudinary = require('cloudinary').v2;
cloudinary.config({
  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,
  api_key: process.env.CLOUDINARY_API_KEY,  
  api_secret: process.env.CLOUDINARY_API_SECRET
});
const uploadService = {
  async uploadImage(file) {
    const result = await cloudinary.uploader.upload(file.path, {
      folder: 'facebook-content',
      resource_type: 'auto'
    });
    return result;
  }
};
module.exports = uploadService;
4.2 Test upload:

// Test upload trong Replit
const testUpload = async () => {
  const result = await uploadService.uploadImage({
    path: 'https://example.com/test.jpg'
  });
  console.log('Upload result:', result.secure_url);
};
4.3 Setup Facebook Graph API:

// services/facebookService.js  
const axios = require('axios');
const facebookService = {
  async postPhoto(accountToken, pageId, imageUrl, caption) {
    const response = await axios.post(
      `https://graph.facebook.com/${pageId}/photos`,
      {
        url: imageUrl,
        caption: caption,
        access_token: accountToken
      }
    );
    return response.data;
  }
};
BÆ¯á»šC 5: BACKGROUND JOBS & DEPLOYMENT
5.1 Setup Redis cho Background Jobs:

# Trong Replit Shell
npm install bull redis
5.2 Táº¡o Background Worker:

// workers/postWorker.js
const Queue = require('bull');
const { Post, Asset, Account } = require('../models');
const postQueue = new Queue('post queue', process.env.REDIS_URL);
postQueue.process('schedule-post', async (job) => {
  const { postId } = job.data;
  const post = await Post.findByPk(postId, {
    include: [Asset, Account]
  });
  
  if(post && post.scheduled_time <= new Date()) {
    await facebookService.postPhoto(
      post.account.access_token,
      post.account.facebook_id, 
      post.asset.secure_url,
      post.caption
    );
    
    await post.update({ status: 'posted' });
  }
});
module.exports = postQueue;
5.3 Deploy trÃªn Replit:

1. Replit tá»± Ä‘á»™ng deploy khi commit
2. URL tá»± Ä‘á»™ng: https://your-repl.replit.dev
3. Always-on Ä‘á»ƒ background jobs cháº¡y 24/7
âš¡ DEVELOPMENT WORKFLOW TRÃŠN REPLIT
Phase 1: Core Setup (Tuáº§n 1)
â–¡ Táº¡o Replit project
â–¡ Setup PostgreSQL database  
â–¡ Táº¡o 4 models (Category, Asset, Account, Post)
â–¡ Test database connection
â–¡ Health check endpoint
Phase 2: Basic CRUD (Tuáº§n 2)
â–¡ Categories CRUD API
â–¡ File upload to Cloudinary
â–¡ Assets management API
â–¡ Test upload workflow
â–¡ Basic error handling
Phase 3: Facebook Integration (Tuáº§n 3)
â–¡ Facebook accounts management
â–¡ Post scheduling API
â–¡ Facebook Graph API integration
â–¡ Test manual posting
â–¡ Authentication & validation
Phase 4: Automation (Tuáº§n 4)
â–¡ Background job system  
â–¡ Auto posting worker
â–¡ Auto commenting
â–¡ Analytics dashboard
â–¡ Error monitoring & logging
Phase 5: Advanced Features (Tuáº§n 5)
â–¡ Duplicate detection (SHA-256 + perceptual hash)
â–¡ AI content analysis
â–¡ Revenue tracking
â–¡ Bulk operations
â–¡ Performance optimization
ðŸ› ï¸ REPLIT-SPECIFIC TIPS
Database Management:
# Trong Replit Shell
npm run db:setup    # Táº¡o tables
npm run db:seed     # Seed data
npm run db:reset    # Reset database
Environment Variables:
1. Secrets tab â†’ Add environment variables
2. Auto-reload khi thay Ä‘á»•i .env
3. PostgreSQL credentials auto-inject
Always-On cho Background Jobs:
1. Upgrade Replit plan Ä‘á»ƒ cÃ³ Always-On
2. Background workers cháº¡y 24/7
3. Auto-restart khi crash
Testing API:
# Replit Console built-in
curl https://your-repl.replit.dev/api/categories
Monitoring:
// Health dashboard
app.get('/admin/health', (req, res) => {
  res.json({
    server: 'running',
    database: sequelize.authenticate() ? 'connected' : 'error',
    redis: redisClient.ping() ? 'connected' : 'error',
    uptime: process.uptime()
  });
});